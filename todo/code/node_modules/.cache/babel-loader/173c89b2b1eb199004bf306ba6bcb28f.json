{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = require(\"react\");\n\nconst data = {};\nconst storage = {\n  get(key, defaultValue) {\n    var _a, _b;\n\n    try {\n      return (_a = data[key]) !== null && _a !== void 0 ? _a : JSON.parse((_b = localStorage.getItem(key)) !== null && _b !== void 0 ? _b : '');\n    } catch (_c) {\n      return defaultValue;\n    }\n  },\n\n  set(key, value) {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n      data[key] = undefined;\n      return true;\n    } catch (_a) {\n      data[key] = value;\n      return false;\n    }\n  }\n\n};\nconst initializedStorageKeys = new Set();\n\nfunction useLocalStorageState(key, defaultValue) {\n  const [state, setState] = react_1.useState(() => {\n    const isCallable = value => typeof value === 'function';\n\n    return {\n      isPersistent: (() => {\n        if (typeof window === 'undefined') {\n          return true;\n        }\n\n        try {\n          localStorage.setItem('--use-local-storage-state--', 'dummy');\n          localStorage.removeItem('--use-local-storage-state--');\n          return true;\n        } catch (_a) {\n          return false;\n        }\n      })(),\n      value: isCallable(defaultValue) ? storage.get(key, defaultValue()) : storage.get(key, defaultValue)\n    };\n  });\n  const updateValue = react_1.useCallback(newValue => {\n    setState(state => {\n      const isCallable = value => typeof value === 'function';\n\n      const value = isCallable(newValue) ? newValue(state.value) : newValue;\n      return {\n        value: value,\n        isPersistent: storage.set(key, value)\n      };\n    });\n  }, [key]);\n  react_1.useEffect(() => {\n    if (initializedStorageKeys.has(key)) {\n      throw new Error(`Multiple instances of useLocalStorageState() has been initialized with the same key. ` + `Use createLocalStorageStateHook() instead. ` + `Example implementation: ` + `https://github.com/astoilkov/use-local-storage-state#create-local-storage-state-hook-example`);\n    } else {\n      initializedStorageKeys.add(key);\n    }\n\n    return () => void initializedStorageKeys.delete(key);\n  }, []);\n  react_1.useEffect(() => {\n    const onStorage = e => {\n      if (e.storageArea === localStorage && e.key === key) {\n        setState({\n          isPersistent: true,\n          value: e.newValue === null ? defaultValue : JSON.parse(e.newValue)\n        });\n      }\n    };\n\n    window.addEventListener('storage', onStorage);\n    return () => window.removeEventListener('storage', onStorage);\n  }, []);\n  return [state.value, updateValue, state.isPersistent];\n}\n\nexports.default = useLocalStorageState;\n\nfunction createLocalStorageStateHook(key, defaultValue) {\n  const updates = [];\n  return function useLocalStorageStateHook() {\n    const [value, setValue, isPersistent] = useLocalStorageState(key, defaultValue);\n    const updateValue = react_1.useCallback(newValue => {\n      for (const update of updates) {\n        update(newValue);\n      }\n    }, []);\n    react_1.useEffect(() => {\n      initializedStorageKeys.delete(key);\n    }, []);\n    react_1.useEffect(() => {\n      updates.push(setValue);\n      return () => void updates.splice(updates.indexOf(setValue), 1);\n    }, [setValue]);\n    return [value, updateValue, isPersistent];\n  };\n}\n\nexports.createLocalStorageStateHook = createLocalStorageStateHook;","map":{"version":3,"sources":["/Users/mv/Downloads/REACT/youtube/node_modules/use-local-storage-state/dist/index.js"],"names":["Object","defineProperty","exports","value","react_1","require","data","storage","get","key","defaultValue","_a","_b","JSON","parse","localStorage","getItem","_c","set","setItem","stringify","undefined","initializedStorageKeys","Set","useLocalStorageState","state","setState","useState","isCallable","isPersistent","window","removeItem","updateValue","useCallback","newValue","useEffect","has","Error","add","delete","onStorage","e","storageArea","addEventListener","removeEventListener","default","createLocalStorageStateHook","updates","useLocalStorageStateHook","setValue","update","push","splice","indexOf"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = require(\"react\");\nconst data = {};\nconst storage = {\n    get(key, defaultValue) {\n        var _a, _b;\n        try {\n            return (_a = data[key]) !== null && _a !== void 0 ? _a : JSON.parse((_b = localStorage.getItem(key)) !== null && _b !== void 0 ? _b : '');\n        }\n        catch (_c) {\n            return defaultValue;\n        }\n    },\n    set(key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n            data[key] = undefined;\n            return true;\n        }\n        catch (_a) {\n            data[key] = value;\n            return false;\n        }\n    },\n};\nconst initializedStorageKeys = new Set();\nfunction useLocalStorageState(key, defaultValue) {\n    const [state, setState] = react_1.useState(() => {\n        const isCallable = (value) => typeof value === 'function';\n        return {\n            isPersistent: (() => {\n                if (typeof window === 'undefined') {\n                    return true;\n                }\n                try {\n                    localStorage.setItem('--use-local-storage-state--', 'dummy');\n                    localStorage.removeItem('--use-local-storage-state--');\n                    return true;\n                }\n                catch (_a) {\n                    return false;\n                }\n            })(),\n            value: isCallable(defaultValue)\n                ? storage.get(key, defaultValue())\n                : storage.get(key, defaultValue),\n        };\n    });\n    const updateValue = react_1.useCallback((newValue) => {\n        setState((state) => {\n            const isCallable = (value) => typeof value === 'function';\n            const value = isCallable(newValue) ? newValue(state.value) : newValue;\n            return {\n                value: value,\n                isPersistent: storage.set(key, value),\n            };\n        });\n    }, [key]);\n    react_1.useEffect(() => {\n        if (initializedStorageKeys.has(key)) {\n            throw new Error(`Multiple instances of useLocalStorageState() has been initialized with the same key. ` +\n                `Use createLocalStorageStateHook() instead. ` +\n                `Example implementation: ` +\n                `https://github.com/astoilkov/use-local-storage-state#create-local-storage-state-hook-example`);\n        }\n        else {\n            initializedStorageKeys.add(key);\n        }\n        return () => void initializedStorageKeys.delete(key);\n    }, []);\n    react_1.useEffect(() => {\n        const onStorage = (e) => {\n            if (e.storageArea === localStorage && e.key === key) {\n                setState({\n                    isPersistent: true,\n                    value: e.newValue === null ? defaultValue : JSON.parse(e.newValue),\n                });\n            }\n        };\n        window.addEventListener('storage', onStorage);\n        return () => window.removeEventListener('storage', onStorage);\n    }, []);\n    return [state.value, updateValue, state.isPersistent];\n}\nexports.default = useLocalStorageState;\nfunction createLocalStorageStateHook(key, defaultValue) {\n    const updates = [];\n    return function useLocalStorageStateHook() {\n        const [value, setValue, isPersistent] = useLocalStorageState(key, defaultValue);\n        const updateValue = react_1.useCallback((newValue) => {\n            for (const update of updates) {\n                update(newValue);\n            }\n        }, []);\n        react_1.useEffect(() => {\n            initializedStorageKeys.delete(key);\n        }, []);\n        react_1.useEffect(() => {\n            updates.push(setValue);\n            return () => void updates.splice(updates.indexOf(setValue), 1);\n        }, [setValue]);\n        return [value, updateValue, isPersistent];\n    };\n}\nexports.createLocalStorageStateHook = createLocalStorageStateHook;\n"]},"metadata":{},"sourceType":"script"}