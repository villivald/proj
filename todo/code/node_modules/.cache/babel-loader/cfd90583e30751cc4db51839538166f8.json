{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/mv/Downloads/REACT/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _slicedToArray = require(\"/Users/mv/Downloads/REACT/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar data = {};\nvar storage = {\n  get: function get(key, defaultValue) {\n    var _a, _b;\n\n    try {\n      return (_a = data[key]) !== null && _a !== void 0 ? _a : JSON.parse((_b = localStorage.getItem(key)) !== null && _b !== void 0 ? _b : '');\n    } catch (_c) {\n      return defaultValue;\n    }\n  },\n  set: function set(key, value) {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n      data[key] = undefined;\n      return true;\n    } catch (_a) {\n      data[key] = value;\n      return false;\n    }\n  }\n};\nvar initializedStorageKeys = new Set();\n\nfunction useLocalStorageState(key, defaultValue) {\n  var _react_1$useState = react_1.useState(function () {\n    var isCallable = function isCallable(value) {\n      return typeof value === 'function';\n    };\n\n    return {\n      isPersistent: function () {\n        if (typeof window === 'undefined') {\n          return true;\n        }\n\n        try {\n          localStorage.setItem('--use-local-storage-state--', 'dummy');\n          localStorage.removeItem('--use-local-storage-state--');\n          return true;\n        } catch (_a) {\n          return false;\n        }\n      }(),\n      value: isCallable(defaultValue) ? storage.get(key, defaultValue()) : storage.get(key, defaultValue)\n    };\n  }),\n      _react_1$useState2 = _slicedToArray(_react_1$useState, 2),\n      state = _react_1$useState2[0],\n      setState = _react_1$useState2[1];\n\n  var updateValue = react_1.useCallback(function (newValue) {\n    setState(function (state) {\n      var isCallable = function isCallable(value) {\n        return typeof value === 'function';\n      };\n\n      var value = isCallable(newValue) ? newValue(state.value) : newValue;\n      return {\n        value: value,\n        isPersistent: storage.set(key, value)\n      };\n    });\n  }, [key]);\n  react_1.useEffect(function () {\n    if (initializedStorageKeys.has(key)) {\n      throw new Error(\"Multiple instances of useLocalStorageState() has been initialized with the same key. \" + \"Use createLocalStorageStateHook() instead. \" + \"Example implementation: \" + \"https://github.com/astoilkov/use-local-storage-state#create-local-storage-state-hook-example\");\n    } else {\n      initializedStorageKeys.add(key);\n    }\n\n    return function () {\n      return void initializedStorageKeys.delete(key);\n    };\n  }, []);\n  react_1.useEffect(function () {\n    var onStorage = function onStorage(e) {\n      if (e.storageArea === localStorage && e.key === key) {\n        setState({\n          isPersistent: true,\n          value: e.newValue === null ? defaultValue : JSON.parse(e.newValue)\n        });\n      }\n    };\n\n    window.addEventListener('storage', onStorage);\n    return function () {\n      return window.removeEventListener('storage', onStorage);\n    };\n  }, []);\n  return [state.value, updateValue, state.isPersistent];\n}\n\nexports.default = useLocalStorageState;\n\nfunction createLocalStorageStateHook(key, defaultValue) {\n  var updates = [];\n  return function useLocalStorageStateHook() {\n    var _useLocalStorageState = useLocalStorageState(key, defaultValue),\n        _useLocalStorageState2 = _slicedToArray(_useLocalStorageState, 3),\n        value = _useLocalStorageState2[0],\n        setValue = _useLocalStorageState2[1],\n        isPersistent = _useLocalStorageState2[2];\n\n    var updateValue = react_1.useCallback(function (newValue) {\n      var _iterator = _createForOfIteratorHelper(updates),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var update = _step.value;\n          update(newValue);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }, []);\n    react_1.useEffect(function () {\n      initializedStorageKeys.delete(key);\n    }, []);\n    react_1.useEffect(function () {\n      updates.push(setValue);\n      return function () {\n        return void updates.splice(updates.indexOf(setValue), 1);\n      };\n    }, [setValue]);\n    return [value, updateValue, isPersistent];\n  };\n}\n\nexports.createLocalStorageStateHook = createLocalStorageStateHook;","map":{"version":3,"sources":["/Users/mv/Downloads/REACT/youtube/node_modules/use-local-storage-state/dist/index.js"],"names":["Object","defineProperty","exports","value","react_1","require","data","storage","get","key","defaultValue","_a","_b","JSON","parse","localStorage","getItem","_c","set","setItem","stringify","undefined","initializedStorageKeys","Set","useLocalStorageState","useState","isCallable","isPersistent","window","removeItem","state","setState","updateValue","useCallback","newValue","useEffect","has","Error","add","delete","onStorage","e","storageArea","addEventListener","removeEventListener","default","createLocalStorageStateHook","updates","useLocalStorageStateHook","setValue","update","push","splice","indexOf"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = require(\"react\");\nconst data = {};\nconst storage = {\n    get(key, defaultValue) {\n        var _a, _b;\n        try {\n            return (_a = data[key]) !== null && _a !== void 0 ? _a : JSON.parse((_b = localStorage.getItem(key)) !== null && _b !== void 0 ? _b : '');\n        }\n        catch (_c) {\n            return defaultValue;\n        }\n    },\n    set(key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n            data[key] = undefined;\n            return true;\n        }\n        catch (_a) {\n            data[key] = value;\n            return false;\n        }\n    },\n};\nconst initializedStorageKeys = new Set();\nfunction useLocalStorageState(key, defaultValue) {\n    const [state, setState] = react_1.useState(() => {\n        const isCallable = (value) => typeof value === 'function';\n        return {\n            isPersistent: (() => {\n                if (typeof window === 'undefined') {\n                    return true;\n                }\n                try {\n                    localStorage.setItem('--use-local-storage-state--', 'dummy');\n                    localStorage.removeItem('--use-local-storage-state--');\n                    return true;\n                }\n                catch (_a) {\n                    return false;\n                }\n            })(),\n            value: isCallable(defaultValue)\n                ? storage.get(key, defaultValue())\n                : storage.get(key, defaultValue),\n        };\n    });\n    const updateValue = react_1.useCallback((newValue) => {\n        setState((state) => {\n            const isCallable = (value) => typeof value === 'function';\n            const value = isCallable(newValue) ? newValue(state.value) : newValue;\n            return {\n                value: value,\n                isPersistent: storage.set(key, value),\n            };\n        });\n    }, [key]);\n    react_1.useEffect(() => {\n        if (initializedStorageKeys.has(key)) {\n            throw new Error(`Multiple instances of useLocalStorageState() has been initialized with the same key. ` +\n                `Use createLocalStorageStateHook() instead. ` +\n                `Example implementation: ` +\n                `https://github.com/astoilkov/use-local-storage-state#create-local-storage-state-hook-example`);\n        }\n        else {\n            initializedStorageKeys.add(key);\n        }\n        return () => void initializedStorageKeys.delete(key);\n    }, []);\n    react_1.useEffect(() => {\n        const onStorage = (e) => {\n            if (e.storageArea === localStorage && e.key === key) {\n                setState({\n                    isPersistent: true,\n                    value: e.newValue === null ? defaultValue : JSON.parse(e.newValue),\n                });\n            }\n        };\n        window.addEventListener('storage', onStorage);\n        return () => window.removeEventListener('storage', onStorage);\n    }, []);\n    return [state.value, updateValue, state.isPersistent];\n}\nexports.default = useLocalStorageState;\nfunction createLocalStorageStateHook(key, defaultValue) {\n    const updates = [];\n    return function useLocalStorageStateHook() {\n        const [value, setValue, isPersistent] = useLocalStorageState(key, defaultValue);\n        const updateValue = react_1.useCallback((newValue) => {\n            for (const update of updates) {\n                update(newValue);\n            }\n        }, []);\n        react_1.useEffect(() => {\n            initializedStorageKeys.delete(key);\n        }, []);\n        react_1.useEffect(() => {\n            updates.push(setValue);\n            return () => void updates.splice(updates.indexOf(setValue), 1);\n        }, [setValue]);\n        return [value, updateValue, isPersistent];\n    };\n}\nexports.createLocalStorageStateHook = createLocalStorageStateHook;\n"]},"metadata":{},"sourceType":"script"}