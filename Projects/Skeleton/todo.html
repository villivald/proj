<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <title>Home Page</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">

    <link rel="icon" type="image/png" href="images/favicon.png">

</head>

<body>

    <div class="container">
        <div class="row">
            <div class="twelve columns header">
                <h1>Portfolio</h1>
                <a class="button" href="index.html">Main Page</a>
                <a class="button" href="projects.html">My Projects</a>
                <a class="button" href="page.html">About This Page</a>
                <a class="button" href="about.html">About Me</a>
                <a class="button" href="contact.html">CV</a>
                <a class="button" href="calendar.html">Calendar</a>
                <a class="button" href="todo.html">To-Do</a>
            </div>
        </div>
        <div class="row">
            <div class="three columns right">
                <h3></h3>
            </div>
            <div class="six columns main">
                <h1>To-Do List</h1>
            </div>
            <div class="three columns right">
                <h3></h3>
            </div>
        </div>

        <div class="row">

            <div class="three columns">
                <h2 class="todo__caption">Studies</h2>
                <div id="tdl1App">
                    <input type="text" class="form-control" placeholder="New task">
                    <div class="tdl1Div">
                        <ul class="List list-unstyled">
                        </ul>
                    </div>
                </div>
            </div>

            <div class="three columns">
                <h2 class="todo__caption">Work</h2>
                <div id="tdl2App">
                    <input type="text" class="form-control" placeholder="New task">
                    <div class="tdl2Div">
                        <ul class="List list-unstyled">
                        </ul>
                    </div>
                </div>
            </div>

            <div class="three columns">
                <h2 class="todo__caption">Home</h2>
                <div id="tdl3App">
                    <input type="text" class="form-control" placeholder="New task">
                    <div class="tdl3Div">
                        <ul class="List list-unstyled">
                        </ul>
                    </div>
                </div>
            </div>

            <div class="three columns">
                <h2 class="todo__caption">Misc</h2>
                <div id="tdl4App">
                    <input type="text" class="form-control" placeholder="New task">
                    <div class="tdl4Div">
                        <ul class="List list-unstyled">
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
    </script>

    <script>

        var List1 = $('#tdl1App ul');

        var Mask1 = 'tdl1_';


        var List2 = $('#tdl2App ul');

        var Mask2 = 'tdl2_';


        var List3 = $('#tdl3App ul');

        var Mask3 = 'tdl3_';


        var List4 = $('#tdl4App ul');

        var Mask4 = 'tdl4_';


        // Функция, которая берёт из памяти наши задачи и делает из них список

        function showTasks() {

            // Узнаём размер хранилища

            var Storage_size = localStorage.length;

            // Если в хранилище что-то есть…

            if (Storage_size > 0) {

                // то берём и добавляем это в задачи  

                for (var i = 0; i < Storage_size; i++) {

                    var key = localStorage.key(i);


                    // обрабатываем первый список

                    if (key.indexOf(Mask1) == 0) {

                        // и делаем это элементами списка

                        $('<li></li>').addClass('tdItem')

                            .attr('data-itemid', key)

                            .text(localStorage.getItem(key))

                            .appendTo(List1);

                    }


                    // обрабатываем второй список

                    if (key.indexOf(Mask2) == 0) {

                        // и делаем это элементами списка

                        $('<li></li>').addClass('tdItem')

                            .attr('data-itemid', key)

                            .text(localStorage.getItem(key))

                            .appendTo(List2);

                    }


                    // обрабатываем третий список

                    if (key.indexOf(Mask3) == 0) {

                        // и делаем это элементами списка

                        $('<li></li>').addClass('tdItem')

                            .attr('data-itemid', key)

                            .text(localStorage.getItem(key))

                            .appendTo(List3);

                    }


                    // обрабатываем четвёртый список

                    if (key.indexOf(Mask4) == 0) {

                        // и делаем это элементами списка

                        $('<li></li>').addClass('tdItem')

                            .attr('data-itemid', key)

                            .text(localStorage.getItem(key))

                            .appendTo(List4);

                    }

                }

            }

        }

        // Сразу вызываем эту функцию, вдруг в памяти уже остались задачи с прошлого раза

        showTasks();

        // Следим, когда пользователь напишет новую задачу в первое поле ввода и нажмёт Enter

        $('#tdl1App input').on('keydown', function (e) {

            if (e.keyCode != 13) return;

            var str = e.target.value;

            e.target.value = "";

            // Если в поле ввода было что-то написано — начинаем обрабатывать

            if (str.length > 0) {

                var number_Id_1 = 0;

                List1.children().each(function (index, el) {

                    var element_Id_1 = $(el).attr('data-itemid').slice(5);

                    if (element_Id_1 > number_Id_1)

                        number_Id_1 = element_Id_1;

                })

                number_Id_1++;

                // Отправляем новую задачу сразу в память

                localStorage.setItem(Mask1 + number_Id_1, str);

                // и добавляем её в конец списка

                $('<li></li>').addClass('tdItem')

                    .attr('data-itemid', Mask1 + number_Id_1)

                    .text(str).appendTo(List1);

            }

        });


        // Следим, когда пользователь напишет новую задачу во второе поле ввода и нажмёт Enter

        $('#tdl2App input').on('keydown', function (e) {

            if (e.keyCode != 13) return;

            var str = e.target.value;

            e.target.value = "";

            // Если в поле ввода было что-то написано — начинаем обрабатывать

            if (str.length > 0) {

                var number_Id_2 = 0;

                List2.children().each(function (index, el) {

                    var element_Id_2 = $(el).attr('data-itemid').slice(5);

                    if (element_Id_2 > number_Id_2)

                        number_Id_2 = element_Id_2;

                })

                number_Id_2++;

                // Отправляем новую задачу сразу в память

                localStorage.setItem(Mask2 + number_Id_2, str);

                // и добавляем её в конец списка

                $('<li></li>').addClass('tdItem')

                    .attr('data-itemid', Mask2 + number_Id_2)

                    .text(str).appendTo(List2);

            }

        });


        // Следим, когда пользователь напишет новую задачу в третье поле ввода и нажмёт Enter

        $('#tdl3App input').on('keydown', function (e) {

            if (e.keyCode != 13) return;

            var str = e.target.value;

            e.target.value = "";

            // Если в поле ввода было что-то написано — начинаем обрабатывать

            if (str.length > 0) {

                var number_Id_3 = 0;

                List3.children().each(function (index, el) {

                    var element_Id_3 = $(el).attr('data-itemid').slice(5);

                    if (element_Id_3 > number_Id_3)

                        number_Id_3 = element_Id_3;

                })

                number_Id_3++;

                // Отправляем новую задачу сразу в память

                localStorage.setItem(Mask3 + number_Id_3, str);

                // и добавляем её в конец списка

                $('<li></li>').addClass('tdItem')

                    .attr('data-itemid', Mask3 + number_Id_3)

                    .text(str).appendTo(List3);

            }

        });


        // Следим, когда пользователь напишет новую задачу в четвёртое поле ввода и нажмёт Enter

        $('#tdl4App input').on('keydown', function (e) {

            if (e.keyCode != 13) return;

            var str = e.target.value;

            e.target.value = "";

            // Если в поле ввода было что-то написано — начинаем обрабатывать

            if (str.length > 0) {

                var number_Id_4 = 0;

                List4.children().each(function (index, el) {

                    var element_Id_4 = $(el).attr('data-itemid').slice(5);

                    if (element_Id_4 > number_Id_4)

                        number_Id_4 = element_Id_4;

                })

                number_Id_4++;

                // Отправляем новую задачу сразу в память

                localStorage.setItem(Mask4 + number_Id_4, str);

                // и добавляем её в конец списка

                $('<li></li>').addClass('tdItem')

                    .attr('data-itemid', Mask4 + number_Id_4)

                    .text(str).appendTo(List4);

            }

        });


        // По клику на задаче — убираем её из списка

        $(document).on('click', '.tdItem', function (e) {

            // Находим задачу, по которой кликнули

            var jet = $(e.target);

            // Убираем её из памяти

            localStorage.removeItem(jet.attr('data-itemid'));

            // и убираем её из списка

            jet.remove();

        })

        // Закончился основной скрипт 
    </script>

    

    <div class="row">
        <div class="twelve columns footer">
            <p>© Maxim Villivald 2019</p>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <a href="mailto: maxim.villivald@student.lab.fi">Contact by email</a>
        </div>
    </div>
</div>


</body>

</html>